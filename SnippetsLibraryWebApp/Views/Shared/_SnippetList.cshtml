<!-- Views/Snippets/_SnippetList.cshtml -->
@model IEnumerable<SnippetsLibraryWebApp.Models.SnippetModel>

<div class="snippets-container">
    @if (!Model.Any())
    {
        <div class="no-snippets">Немає сніпетів для відображення.</div>
    }
    else
    {
        foreach (var snippet in Model)
        {
            <div data-id="@snippet.ID">
                @Html.Partial("_SnippetCard", snippet)
            </div>
        }
    }
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            // Обробка кліку на блок сніпета для розгортання/згортання додаткової інформації
            $('.snippet-card').on('click', function (e) {
                // Перевіряємо, чи клікували на кнопку "Деталі"
                if ($(e.target).hasClass('details-btn')) {
                    e.preventDefault();
                    e.stopPropagation();
                }

                var extra = $(this).find('.snippet-extra');
                extra.slideToggle(300);
            });

            // Обробка кліку на кнопку "Деталі" для переходу на сторінку з деталями
            $('.details-btn').on('click', function (e) {
                e.preventDefault();
                e.stopPropagation();

                var snippetCard = $(this).closest('.snippet-card');
                var snippetId = snippetCard.closest('[data-id]').data('id');
                // Перенаправлення на сторінку деталей сніпета
                window.location.href = '@Url.Action("Details", "Snippets")/' + snippetId;
            });
        });
    </script>
}
